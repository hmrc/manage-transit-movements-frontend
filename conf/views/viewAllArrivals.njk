{% extends "includes/layout.njk" %}

{% from "macros/title.njk" import title %}
{% from "macros/showMovementsByDate.njk" import showMovementsByDate %}
{% from "macros/movementSearch.njk" import movementSearch %}
{% from "macros/pagination/macro.njk" import pagination %}

{% block pageTitle %}
  {{ title(messages("viewArrivalNotifications.title")) }}
{% endblock %}

{% block mainContent %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">
        {{ messages("viewArrivalNotifications.heading") }}
      </h1>
      <p class="govuk-body">
        <a id="make-arrival-notification" class="govuk-link" href={{ declareArrivalNotificationUrl }} >
          {{ messages("viewArrivalNotifications.makeArrivalNotification") }}
        </a>
      </p>

      {{ movementSearch( messages('movement.search.title'), mrn, "mrn", routes.controllers.arrival.ViewArrivalsSearchResultsController.onPageLoad("").url) }}

      {%-  if results and results.totalPages == 1  %}
        <p id="results-count" class="govuk-body">Showing <b>{{results.count}}</b> {{messages(singularOrPlural)}}</p>
      {% endif -%}

      {%- if results and results.totalPages > 1 %}
          {{ pagination(results, previous, next, items, firstItemDotted, lastItemDotted) }}
      {% endif -%}

      {{ showMovementsByDate("Arrival notifications table", messages("viewArrivalNotifications.table.updated"), messages("viewArrivalNotifications.table.mrn"), messages("viewArrivalNotifications.table.status"), messages("viewArrivalNotifications.table.action"), dataRows) }}

      <p class="govuk-body govuk-!-margin-top-3">
        <a id="go-to-manage-transit-movements" class="govuk-link" href="{{ homePageUrl }}">
          {{ messages("viewArrivalNotifications.goToManageTransitMovements") }}
        </a>
      </p>
    </div>
  </div>

{% endblock %}